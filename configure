#!/bin/bash

echo "//Autogenerated offsets from kallsyms" > offsets.h

TEMP=`sudo grep tasklist_lock /proc/kallsyms`
TEMP2=($TEMP)
echo "Setting TASKLIST_LOCK_ADDR = ${TEMP2[0]}"
echo "#define TASKLIST_LOCK_ADDR 0x${TEMP2[0]}" >> offsets.h

TEMP=`sudo grep proc_root_inode_operations /proc/kallsyms`
TEMP2=($TEMP)
echo "Setting PROC_ROOT_INODE_OPERATIONS_ADDR = ${TEMP2[0]}"
echo "#define PROC_ROOT_INODE_OPERATIONS_ADDR 0x${TEMP2[0]}" >> offsets.h



